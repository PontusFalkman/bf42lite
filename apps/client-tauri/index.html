<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bf42lite</title>
    <style>
      /* === GLOBAL & RESET === */
      body { margin: 0; overflow: hidden; background-color: #000; user-select: none; font-family: "Impact", sans-serif; }
      canvas { display: block; }
      
      /* Common BF Colors */
      :root { --bf-yellow: #ffcc00; --bf-bg: rgba(0, 0, 0, 0.6); }

      /* === 1. DEBUG INFO (Top Left) === */
      #debug-overlay {
        position: absolute; top: 10px; left: 10px;
        color: lime; font-family: monospace; font-size: 12px;
        pointer-events: none; text-shadow: 1px 1px 0 #000;
      }

      /* === 2. TICKET COUNTER (Top Right) === */
      #ticket-counter {
        position: absolute; top: 0; right: 0;
        display: flex; background: var(--bf-bg);
        border-bottom-left-radius: 10px; padding: 10px 20px;
        color: white; font-size: 24px; pointer-events: none;
      }
      .team-score { margin: 0 15px; text-align: center; }
      .team-axis { color: #ff4444; }
      .team-allies { color: #4488ff; }
      .score-label { font-size: 12px; opacity: 0.8; display: block; }

      /* === 3. BOTTOM HUD (Health & Ammo) === */
      #hud-layer {
        position: absolute; bottom: 20px; left: 0; width: 100%;
        display: flex; justify-content: space-between; padding: 0 40px; box-sizing: border-box;
        pointer-events: none; /* Let clicks pass through to game */
      }
      
      .hud-panel {
        display: flex; align-items: center;
        color: var(--bf-yellow); text-shadow: 2px 2px 0 #000;
      }

      /* Health Bar Style */
      .health-icon { font-size: 40px; margin-right: 10px; }
      .health-val { font-size: 48px; }
      .bar-container { width: 150px; height: 10px; background: #333; margin-left: 10px; border: 1px solid white; }
      #health-fill { width: 100%; height: 100%; background: var(--bf-yellow); transition: width 0.2s; }

      /* Ammo Style */
      .ammo-val { font-size: 48px; text-align: right; }
      .weapon-name { font-size: 18px; color: white; display: block; text-align: right; }

      /* === 4. DEPLOY SCREEN (Overlay) === */
      #deploy-screen {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.85);
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        z-index: 10; /* On top of everything */
        color: var(--bf-yellow);
      }
      
      .map-container {
        position: relative; width: 500px; height: 500px;
        background: #2a3b2a; border: 4px solid var(--bf-yellow);
        margin-bottom: 20px;
        /* Grid pattern for "Map" look */
        background-image: radial-gradient(#445544 1px, transparent 1px);
        background-size: 20px 20px;
      }

      .spawn-point {
        position: absolute; width: 24px; height: 24px;
        transform: translate(-50%, -50%);
        background: white; border: 2px solid black; border-radius: 50%;
        cursor: pointer; box-shadow: 0 0 5px #000;
        z-index: 100;
      }
      /* Default Team Colors */
      .spawn-point.axis { background: #ff4444; }
      .spawn-point.allies { background: #4488ff; }

      .spawn-point:hover { transform: translate(-50%, -50%) scale(1.2); background: var(--bf-yellow); }

      /* Selected Flag Style */
      .spawn-point.selected { 
        background: #00ff00 !important; 
        box-shadow: 0 0 15px #00ff00; 
        border-color: white; 
      }

      button.bf-btn {
        background: transparent; border: 2px solid var(--bf-yellow);
        color: var(--bf-yellow); font-family: "Impact", sans-serif;
        font-size: 24px; padding: 10px 40px; cursor: pointer;
        text-transform: uppercase; transition: 0.1s;
      }
      button.bf-btn:hover { background: var(--bf-yellow); color: black; }
/* === 5. CROSSHAIR & HITMARKER === */
.center-screen {
        position: absolute; 
        top: 50%; left: 50%; 
        transform: translate(-50%, -50%);
        pointer-events: none;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* The Static Crosshair (+) */
      #crosshair {
        width: 40px; height: 40px;
        font-family: monospace; 
        font-size: 30px; 
        color: rgba(255, 255, 255, 0.8);
        text-shadow: 1px 1px 0 #000;
      }

      /* The Hit Marker (X) - Hidden by default */
      #hitmarker {
        position: absolute;
        width: 40px; height: 40px;
        font-family: sans-serif;
        font-size: 35px;
        font-weight: bold;
        color: #ff3333; /* Red */
        opacity: 0; /* Invisible start */
        transition: opacity 0.1s;
        text-shadow: 1px 1px 0 #000;
      }
      /* === 6. GAME OVER SCREEN === */
      #game-over-screen {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(50, 0, 0, 0.8); /* Dark Red tint */
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        z-index: 20; /* Above deploy screen */
        color: white;
        opacity: 0; pointer-events: none; transition: opacity 0.5s;
      }
      #game-over-screen.visible { opacity: 1; pointer-events: all; }
      
      .end-title { font-size: 80px; text-transform: uppercase; color: var(--bf-yellow); margin-bottom: 20px; }
      .end-subtitle { font-size: 30px; }

      /* Animation class */
      .hit-active { opacity: 1 !important; }
      /* Utility to hide things */
      .hidden { display: none !important; }
      /* Add simple styles */
    .class-selector { display: flex; gap: 10px; margin: 20px 0; justify-content: center; }
    .class-btn { padding: 10px 20px; background: #333; color: #fff; border: 1px solid #555; cursor: pointer; font-family: 'Courier New', monospace; font-weight: bold; }
    .class-btn:hover { background: #444; }
    .class-btn.selected { background: #d62828; border-color: #ff0000; box-shadow: 0 0 10px #d62828; }
    </style>
  </head>
  <body>
    <canvas id="game"></canvas>

    <div id="debug-overlay">FPS: <span id="fps">0</span> | RTT: <span id="rtt">0</span>ms</div>
    
    <div id="ticket-counter">
      <div class="team-score team-axis"><span class="score-label">AXIS</span><span id="tickets-axis">100</span></div>
      <div class="team-score team-allies"><span class="score-label">ALLIES</span><span id="tickets-allies">100</span></div>
    </div>

    <div id="hud-layer" class="hidden">
      <div class="hud-panel">
        <div class="health-icon">+</div>
        <div>
          <div class="health-val" id="health-val">100</div>
          <div class="bar-container"><div id="health-fill"></div></div>
        </div>
      </div>
      <div class="hud-panel">
        <div>
          <div class="weapon-name">THOMPSON</div>
          <div class="ammo-val"><span id="ammo-curr">30</span> | <span id="ammo-res">120</span></div>
        </div>
      </div>
    </div>

    <div id="deploy-screen">
      <h1>DEPLOYMENT</h1>
      <div class="map-container">
        <div class="spawn-point allies" style="top: 20%; left: 20%;" data-id="1"></div>
        <div class="spawn-point axis" style="top: 80%; left: 80%;" data-id="2"></div>
        <div class="spawn-point" style="top: 50%; left: 50%; background: gray;" data-id="0"></div>
      </div>
      <button id="btn-spawn" class="bf-btn">ENTER BATTLE</button>
    </div>
    <div class="center-screen">
      <div id="crosshair">+</div>
      <div id="hitmarker">x</div>
  </div>
  <div id="game-over-screen">
    <div class="end-title" id="end-title">GAME OVER</div>
    <div class="end-subtitle">RETURNING TO BATTLE...</div>
</div>
<div id="deploy-screen" class="hidden">
  <h1>DEPLOYMENT</h1>
  <h2 id="end-title">PREPARE FOR BATTLE</h2>

  <div class="class-selector">
      <button class="class-btn selected" data-id="0">ASSAULT</button>
      <button class="class-btn" data-id="1">MEDIC</button>
      <button class="class-btn" data-id="2">SCOUT</button>
  </div>
  <div class="spawn-list">
     </div>

  <button id="btn-spawn">DEPLOY</button>
</div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>